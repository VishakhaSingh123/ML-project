<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Performance Predictor</title>

    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #e3f2fd, #f8fbff);
            --card-bg: #ffffff;
            --primary-blue: #3b82f6;
            --soft-blue: #dbeafe;
            --text-dark: #0f172a;
            --text-light: #475569;
        }

        body.dark {
            --bg-gradient: linear-gradient(135deg, #0f172a, #020617);
            --card-bg: #020617;
            --primary-blue: #60a5fa;
            --soft-blue: #1e293b;
            --text-dark: #e5e7eb;
            --text-light: #94a3b8;
        }

        body {
            margin: 0;
            font-family: "Segoe UI", sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.4s;
        }

        .card {
            background: var(--card-bg);
            width: 540px;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            transition: background 0.4s;
        }

        h1 {
            text-align: center;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        h3 {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 28px;
        }

        label {
            font-weight: 600;
            margin-top: 14px;
            display: block;
            color: var(--text-dark);
        }

        select, input {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #cbd5f5;
            font-size: 14px;
        }

        .error {
            color: #ef4444;
            font-size: 12px;
            display: none;
        }

        button {
            margin-top: 24px;
            width: 100%;
            padding: 12px;
            background: var(--primary-blue);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .toggle {
            text-align: right;
            font-size: 13px;
            cursor: pointer;
            color: var(--primary-blue);
        }

        .result {
            margin-top: 28px;
            background: var(--soft-blue);
            padding: 18px;
            border-radius: 12px;
            text-align: center;
        }

        .score {
            font-size: 32px;
            font-weight: bold;
            color: var(--text-dark);
        }

        .category {
            margin-top: 6px;
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-blue);
        }

        .progress {
            background: #e5e7eb;
            height: 10px;
            border-radius: 10px;
            margin-top: 14px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background: var(--primary-blue);
            transition: width 1.2s ease;
        }

        .footer {
            text-align: center;
            margin-top: 16px;
            font-size: 12px;
            color: var(--text-light);
        }
    </style>
</head>

<body>

<div class="card">
    <div class="toggle" onclick="toggleDark()">üåô Toggle Dark Mode</div>

    <h1>Student Performance Predictor</h1>
    <h3>Math Score Prediction</h3>

    <form action="/predictdata" method="POST" onsubmit="return validateForm()">

        <label>Gender</label>
        <select name="gender">
            <option value="female">Female</option>
            <option value="male">Male</option>
        </select>

        <label>Race / Ethnicity</label>
        <select name="ethnicity">
            <option value="group A">Group A</option>
            <option value="group B">Group B</option>
            <option value="group C">Group C</option>
            <option value="group D">Group D</option>
            <option value="group E">Group E</option>
        </select>

        <label>Parental Education</label>
        <select name="parental_level_of_education">
            <option value="bachelor's degree">Bachelor's Degree</option>
            <option value="master's degree">Master's Degree</option>
            <option value="associate's degree">Associate's Degree</option>
            <option value="some college">Some College</option>
            <option value="high school">High School</option>
            <option value="some high school">Some High School</option>
        </select>

        <label>Lunch</label>
        <select name="lunch">
            <option value="standard">Standard</option>
            <option value="free/reduced">Free / Reduced</option>
        </select>

        <label>Test Prep</label>
        <select name="test_preparation_course">
            <option value="none">None</option>
            <option value="completed">Completed</option>
        </select>

        <label>Reading Score</label>
        <input type="number" name="reading_score" id="reading" min="0" max="100">
        <div class="error" id="readError">Enter value between 0 and 100</div>

        <label>Writing Score</label>
        <input type="number" name="writing_score" id="writing" min="0" max="100">
        <div class="error" id="writeError">Enter value between 0 and 100</div>

        <button type="submit">Predict Maths Score</button>
    </form>

    {% if results %}
    <div class="result">
        <div class="score">{{ results }}</div>

        <div class="category">
            {% if results >= 75 %}
                Excellent Performance üåü
            {% elif results >= 50 %}
                Average Performance üëç
            {% else %}
                Needs Improvement üìò
            {% endif %}
        </div>

        <div class="progress">
            <div class="progress-bar" id="bar"></div>
        </div>
    </div>
    {% endif %}

    <div class="footer">
        End-to-End ML ¬∑ Flask ¬∑ Scikit-learn
    </div>
</div>

<script>
    function toggleDark() {
        document.body.classList.toggle("dark");
    }

    function validateForm() {
        let r = document.getElementById("reading").value;
        let w = document.getElementById("writing").value;
        let ok = true;

        if (r < 0 || r > 100) {
            document.getElementById("readError").style.display = "block";
            ok = false;
        }
        if (w < 0 || w > 100) {
            document.getElementById("writeError").style.display = "block";
            ok = false;
        }
        return ok;
    }

    {% if results %}
    let score = {{ results }};
    document.getElementById("bar").style.width = score + "%";
    {% endif %}
</script>

</body>
</html>
